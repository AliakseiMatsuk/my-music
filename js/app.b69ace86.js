(function(t){function e(e){for(var s,r,c=e[0],l=e[1],o=e[2],d=0,f=[];d<c.length;d++)r=c[d],n[r]&&f.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,o||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,c=1;c<a.length;c++){var l=a[c];0!==n[l]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},n={app:0},i=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/my-music/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var o=0;o<c.length;o++)e(c[o]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"065b":function(t,e,a){"use strict";var s=a("3e38"),n=a.n(s);n.a},"1f55":function(t,e,a){"use strict";var s=a("8c8d"),n=a.n(s);n.a},"3e38":function(t,e,a){},"45f1":function(t,e,a){"use strict";var s=a("7f8e"),n=a.n(s);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper",attrs:{id:"app"}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)},i=[],r=(a("7faf"),a("2877")),c={},l=Object(r["a"])(c,n,i,!1,null,null,null),o=l.exports,u=a("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("s-default",{attrs:{title:"My Music"}},[a("ul",{staticClass:"m-primary"},[a("li",{staticClass:"m-primary__item"},[a("router-link",{staticClass:"m-primary__link",attrs:{to:"/statistic"}},[t._v("My Music")])],1)]),a("transition",{attrs:{name:"fade-modal",mode:"out-in",appear:""}},[t.GET_PLAYLIST.length?a("div",{key:"playlist",staticClass:"p-home__playlist"},[a("t-default",{attrs:{format:t.playListFormat,dataList:t.GET_PLAYLIST},on:{showDetails:t.showDetails}}),a("transition",{attrs:{name:"fade-modal",appear:""}},[t.details?a("b-details",{attrs:{detailsData:t.details},on:{updateDetails:t.updateDetails}}):t._e()],1)],1):a("div",{key:"loader",staticClass:"p-home__loader"},[a("b-loading")],1)])],1)},f=[],m=a("cebc"),p=a("2f62"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"s-default"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"s-default__title _centered"},[t._v(t._s(t.title))]),a("div",{staticClass:"s-default__content"},[t._t("default")],2)])])},h=[],v={name:"sDefault",props:{title:{type:String,required:!0}}},b=v,y=(a("45f1"),Object(r["a"])(b,_,h,!1,null,null,null)),g=y.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"t-default"},[a("thead",[a("tr",{staticClass:"t-default__row _light"},t._l(t.format,function(e,s){return a("th",{key:"header-"+s,staticClass:"t-default__cell",class:t.sortedColumnClassName(e),on:{click:function(a){t.sort(e.field)}}},[a("div",{staticClass:"t-default__cell-value"},[t._v(t._s(e.title))])])}),0)]),a("tbody",{staticClass:"t-default__body"},t._l(t.sortedDataList,function(e,s){return a("tr",{key:"row-"+s,staticClass:"t-default__row",on:{click:function(a){t.$emit("showDetails",e)}}},t._l(t.format,function(s,n){return a("td",{key:"cell-"+n,staticClass:"t-default__cell"},[t._v(t._s(e[s.field]))])}),0)}),0)])},T=[],S=(a("55dd"),a("bd86")),D={name:"tDefault",data:function(){return{currentSort:"",currentSortDir:"asc"}},props:{format:{type:Array,required:!0},dataList:{type:Array,required:!0}},created:function(){this.currentSort=this.format[0].field},methods:{sort:function(t){t===this.currentSort&&(this.currentSortDir="asc"===this.currentSortDir?"desc":"asc"),this.currentSort=t},sortedColumnClassName:function(t){return Object(S["a"])({},"_active _"+this.currentSortDir,t.field===this.currentSort)}},computed:{sortedDataList:function(){var t=this;return this.dataList.slice().sort(function(e,a){var s=1;return"desc"===t.currentSortDir&&(s=-1),e[t.currentSort]<a[t.currentSort]?-1*s:e[t.currentSort]>a[t.currentSort]?1*s:0})}}},L=D,j=(a("1f55"),Object(r["a"])(L,C,T,!1,null,"5da9a811",null)),A=j.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"b-details",class:{_visible:t.isDataUpdating,_hidden:!t.isDataUpdating}},[a("div",{staticClass:"container"},[a("div",{staticClass:"b-details__container"},[a("div",{staticClass:"b-details__info"},[a("h2",{staticClass:"b-details__info-title _fwbold"},[t._v(t._s(t.currentData.artist))]),a("div",{staticClass:"b-details__cover"},[a("div",{staticClass:"b-details__cover-inner"},[a("img",{staticClass:"b-details__cover-image",attrs:{src:t.getImage,alt:t.currentData.name,"data-object-fit":"cover","data-object-position":"center"}})])])]),a("div",{staticClass:"b-details__content"},[a("h2",{staticClass:"b-details__content-title"},[t._v(t._s(t.currentData.name))]),a("div",{staticClass:"b-details__comment"},[a("h4",{staticClass:"b-details__comment-title"},[t._v("Comment")]),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.comment,expression:"comment",modifiers:{trim:!0}}],key:t.currentData.name,staticClass:"b-details__comment-field",domProps:{value:t.comment},on:{focus:t.onCommentFocus,blur:[t.onCommentBlur,function(e){t.$forceUpdate()}],input:function(e){e.target.composing||(t.comment=e.target.value.trim())}}})]),a("div",{staticClass:"b-details__share",class:{_show:t.comment}},[a("a",{staticClass:"b-details__share-twitter",attrs:{href:t.setTweetShareParams,target:"_blank"}},[a("svg-use",{attrs:{svg:{name:"twitter"}}})],1)])])])])])},O=[],E=(a("a481"),{name:"bDetails",data:function(){return{autoSaveTimer:null,isDataUpdating:!1,currentData:null,comment:""}},props:{detailsData:{type:Object,required:!0}},created:function(){this.currentData=this.detailsData,this.updateComment(this.currentData)},methods:{onCommentFocus:function(){var t=this;this.autoSaveTimer=setInterval(function(){t.emitUpdateDetails()},5e3)},onCommentBlur:function(){clearInterval(this.autoSaveTimer),this.emitUpdateDetails()},emitUpdateDetails:function(){this.$emit("updateDetails",Object(m["a"])({},this.currentData,{comment:this.comment}))},updateComment:function(t){this.comment=t.comment||""}},computed:{getImage:function(){return this.currentData.artist?"https://ui-avatars.com/api/?name=".concat(this.currentData.artist,"&size=300"):"http://placehold.it/300x300"},setTweetShareParams:function(){return"https://twitter.com/intent/tweet?text=".concat(this.comment.replace(/ /g,"%20"))}},watch:{detailsData:{handler:function(t,e){var a=this;t!==e&&(this.isDataUpdating=!0,setTimeout(function(){a.currentData=a.detailsData,a.updateComment(t),a.isDataUpdating=!1},250))},deep:!0}}}),w=E,P=(a("e42e"),Object(r["a"])(w,I,O,!1,null,null,null)),k=P.exports,x={name:"home",data:function(){return{playListFormat:[{title:"Last played",field:"last_played"},{title:"Artist",field:"artist"},{title:"Name",field:"name"},{title:"Genre",field:"genre"},{title:"Stars",field:"stars"}],details:null}},components:{sDefault:g,bDetails:k,tDefault:A},created:function(){this.A_GET_PLAYLIST()},methods:Object(m["a"])({},Object(p["b"])("playlist",["A_GET_PLAYLIST","A_UPDATE_PLAYLIST_ITEM"]),{showDetails:function(t){this.details=t},updateDetails:function(t){this.A_UPDATE_PLAYLIST_ITEM(t)}}),computed:Object(m["a"])({},Object(p["c"])("playlist",["GET_PLAYLIST"]))},Y=x,U=(a("c219"),Object(r["a"])(Y,d,f,!1,null,null,null)),G=U.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("s-default",{attrs:{title:"Your Music statistics"}},[a("ul",{staticClass:"m-primary"},[a("li",{staticClass:"m-primary__item"},[a("router-link",{staticClass:"m-primary__link",attrs:{to:"/"}},[t._v("Home")])],1)]),a("transition",{attrs:{name:"fade-modal",mode:"out-in",appear:""}},[t.GET_PLAYLIST_STATISTIC.length?a("div",{key:"statistic",staticClass:"p-statistic__statistic"},[a("ul",{staticClass:"p-statistic__charts"},t._l(t.GET_PLAYLIST_STATISTIC,function(t){return a("li",{key:t.title,staticClass:"p-statistic__charts-item"},[a("b-chart",{attrs:{chartData:t}})],1)}),0)]):a("div",{key:"loader",staticClass:"p-statistic__loader"},[a("b-loading")],1)])],1)},$=[],N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"b-chart"},[a("h2",{staticClass:"b-chart__title _centered"},[t._v(t._s(t.chartData.title))]),a("div",{ref:"chart",staticClass:"b-chart__chart"})])},q=[],z=a("2d5f"),F=a.n(z),V={name:"bChart",props:{chartData:{type:Object,required:!0}},mounted:function(){var t=this;this.$watch("chartData",function(){F.a.generate({bindto:t.$refs.chart,data:{type:"pie",columns:t.chartData.chartValues}})})}},H=V,J=(a("ad49"),Object(r["a"])(H,N,q,!1,null,null,null)),B=J.exports,R={name:"statistic",created:function(){this.A_GET_PLAYLIST()},components:{bChart:B,sDefault:g},methods:Object(m["a"])({},Object(p["b"])("playlist",["A_GET_PLAYLIST"])),computed:Object(m["a"])({},Object(p["c"])("playlist",["GET_PLAYLIST_STATISTIC"]))},K=R,Q=(a("7ec4"),Object(r["a"])(K,M,$,!1,null,null,null)),W=Q.exports;s["a"].use(u["a"]);var X,Z,tt=new u["a"]({mode:"history",base:"/my-music/",routes:[{path:"",name:"home",component:G},{path:"/statistic",name:"statistic",component:W}]}),et=a("f499"),at=a.n(et),st=(a("7f7f"),a("7514"),a("ac6a"),"playlist"),nt="A_GET_PLAYLIST",it="A_UPDATE_PLAYLIST_ITEM",rt="M_SET_PLAYLIST",ct="M_UPDATE_PLAYLIST_ITEM",lt=a("795b"),ot=a.n(lt),ut=a("bc3a"),dt=a.n(ut),ft=dt.a.create({baseURL:"https://vest-test-task.herokuapp.com/"});ft.interceptors.response.use(null,function(t){return t?ft.request(t.config):ot.a.reject(t)});var mt={playlist:[]},pt={GET_PLAYLIST:function(t){return t.playlist},GET_PLAYLIST_STATISTIC:function(t){var e=[{title:"Genre",key:"genre",values:{},chartValues:[]},{title:"Stars",key:"stars",values:{},chartValues:[]}];return e.forEach(function(e){t.playlist.forEach(function(t){t[e.key]in e.values?e.values[t[e.key]]++:e.values[t[e.key]]=1})}),e.forEach(function(t){for(var e in t.values)t.chartValues.push([e,t.values[e]])}),e}},_t=(X={},Object(S["a"])(X,nt,function(t){var e=t.commit;return ft.get(st).then(function(t){e(rt,t.data)})}),Object(S["a"])(X,it,function(t,e){var a=t.commit;a(ct,e)}),X),ht=(Z={},Object(S["a"])(Z,rt,function(t,e){var a=localStorage.getItem("playlist");t.playlist=a?JSON.parse(a):e}),Object(S["a"])(Z,ct,function(t,e){s["a"].set(t.playlist.find(function(t){return t.name===e.name}),"comment",e.comment),localStorage.setItem("playlist",at()(t.playlist))}),Z),vt={namespaced:!0,state:mt,getters:pt,actions:_t,mutations:ht};s["a"].use(p["a"]);var bt=new p["a"].Store({modules:{playlist:vt},state:{},mutations:{},actions:{}}),yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{class:t.svgClass},[a("use",{attrs:{"xlink:href":t.svgHref}})])},gt=[],Ct={name:"svgUse",props:{svg:{type:Object,default:function(){return{name:"",className:""}}}},computed:{svgClass:function(){return"svg svg-".concat(this.svg.name).concat(this.svg.className?" "+this.svg.className:"")},svgHref:function(){return"#".concat(this.svg.name)}}},Tt=Ct,St=(a("065b"),Object(r["a"])(Tt,yt,gt,!1,null,null,null)),Dt=St.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-spinner",{attrs:{message:t.mes,"line-size":5,size:130,"font-size":22,speed:1,spacing:15,"line-fg-color":"#7dce94","line-bg-color":"#0d262e","text-fg-color":"#3d3d3f"}})},jt=[],At=a("5b7e"),It=a.n(At),Ot={name:"bLoading",props:{mes:{type:String,default:"Loading..."}},components:{bSpinner:It.a}},Et=Ot,wt=Object(r["a"])(Et,Lt,jt,!1,null,null,null),Pt=wt.exports;s["a"].component("svgUse",Dt),s["a"].component("bLoading",Pt),s["a"].config.productionTip=!1,new s["a"]({router:tt,store:bt,render:function(t){return t(o)}}).$mount("#app")},"7ec4":function(t,e,a){"use strict";var s=a("c27d"),n=a.n(s);n.a},"7f8e":function(t,e,a){},"7faf":function(t,e,a){"use strict";var s=a("dc71"),n=a.n(s);n.a},"84c3":function(t,e,a){},"8c8d":function(t,e,a){},ad49:function(t,e,a){"use strict";var s=a("b8df"),n=a.n(s);n.a},b0da:function(t,e,a){},b8df:function(t,e,a){},c219:function(t,e,a){"use strict";var s=a("84c3"),n=a.n(s);n.a},c27d:function(t,e,a){},dc71:function(t,e,a){},e42e:function(t,e,a){"use strict";var s=a("b0da"),n=a.n(s);n.a}});
//# sourceMappingURL=app.b69ace86.js.map